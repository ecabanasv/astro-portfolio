---
import { insights } from "../data/insights";
import Section from "./ui/Section.astro";
import Card from "./ui/Card.astro";
import Badge from "./ui/Badge.astro";
import Button from "./ui/Button.astro";
---

<Section id="blog">
  <div
    class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12"
  >
    <div>
      <span class="text-xs font-bold uppercase tracking-widest text-primary"
        >Blog</span
      >
      <h2 class="mt-2 text-3xl md:text-4xl font-bold">Latest notes</h2>
    </div>
    <Button href="#contact" variant="outline"
      >Request a tailored playbook</Button
    >
  </div>

  <div class="grid gap-6 md:grid-cols-3">
    {
      insights.map((post) => (
        <Card class="flex flex-col p-6 hover:border-primary/50 transition-colors h-full">
          <div class="flex items-center gap-3 mb-4">
            <Badge variant="accent" class="text-xs">
              {post.tag}
            </Badge>
            <span class="text-xs text-text-muted font-medium">{post.date}</span>
          </div>

          <h3 class="text-xl font-bold mb-3 line-clamp-2">{post.title}</h3>
          <p class="text-sm text-text-muted mb-4 line-clamp-3 flex-grow">
            {post.summary}
          </p>

          <div class="mt-auto pt-2">
            <a
              href={post.url ?? "#contact"}
              class="text-sm font-bold text-primary hover:underline underline-offset-4"
            >
              {post.url ? "Read article" : "Share this with me"}
            </a>
          </div>
        </Card>
      ))
    }
  </div>
</Section>
