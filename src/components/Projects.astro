---
import { projects } from "../data/projects";
import Section from "./ui/Section.astro";
import Card from "./ui/Card.astro";
import Badge from "./ui/Badge.astro";
import Button from "./ui/Button.astro";
---

<Section id="portfolio">
  <div class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-12">
    <div>
      <span class="text-xs font-bold uppercase tracking-widest text-primary">Portfolio</span>
      <h2 class="mt-2 text-3xl md:text-4xl font-bold">Selected work</h2>
    </div>
    <p class="text-text-muted max-w-md text-right md:text-left">
      Demos and mockups you can adapt for your own pilots.
    </p>
  </div>

  <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
    {projects.map(project => (
      <Card class="flex flex-col overflow-hidden hover:-translate-y-1 transition-transform duration-300 h-full">
        <div class="relative h-48 w-full overflow-hidden bg-surface-muted border-b border-border">
           <!-- Placeholder for project image/preview -->
           <div class="absolute inset-0 bg-surface-muted/50">
             <div class="absolute inset-0 opacity-[0.03] bg-[radial-gradient(#000_1px,transparent_1px)] [background-size:16px_16px] dark:bg-[radial-gradient(#fff_1px,transparent_1px)]"></div>
           </div>
           <div class="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5"></div>
           
           <!-- Browser chrome -->
           <div class="absolute top-0 left-0 right-0 h-8 bg-surface/80 backdrop-blur-sm border-b border-border flex items-center px-3 gap-1.5">
             <div class="w-2.5 h-2.5 rounded-full bg-red-400/80"></div>
             <div class="w-2.5 h-2.5 rounded-full bg-yellow-400/80"></div>
             <div class="w-2.5 h-2.5 rounded-full bg-green-400/80"></div>
           </div>

           <!-- Abstract UI Content -->
           <div class="absolute top-12 left-4 right-4 bottom-4 flex flex-col gap-3 opacity-50">
             <div class="h-8 w-1/3 bg-surface rounded-md border border-border/50"></div>
             <div class="flex gap-3 h-full">
               <div class="w-1/4 bg-surface rounded-md border border-border/50 h-full"></div>
               <div class="flex-1 bg-surface rounded-md border border-border/50 h-full"></div>
             </div>
           </div>
        </div>
        
        <div class="flex flex-col flex-grow p-6">
          <h3 class="text-xl font-bold mb-2">{project.title}</h3>
          <p class="text-sm text-text-muted mb-4 flex-grow">{project.description}</p>
          
          <div class="flex flex-wrap gap-2 mb-6">
            {project.stack.split(",").map(item => (
              <Badge variant="secondary" class="text-xs">{item.trim()}</Badge>
            ))}
          </div>
          
          {project.url && (
            <div class="flex items-center gap-3 mt-auto">
              <Button href={project.url} target="_blank" rel="noopener noreferrer" size="sm">
                {project.ctaLabel ?? "View demo"}
              </Button>
              <a
                href="#contact"
                class="text-sm font-medium text-text-muted hover:text-primary transition-colors"
              >
                Book walkthrough â†’
              </a>
            </div>
          )}
        </div>
      </Card>
    ))}
  </div>
</Section>
